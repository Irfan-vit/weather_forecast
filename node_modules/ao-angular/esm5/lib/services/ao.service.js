/**
 * @fileoverview added by tsickle
 * Generated from: lib/services/ao.service.ts
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { ActionSheetController, AlertController, LoadingController, ModalController, Platform, ToastController } from '@ionic/angular';
import { AOString } from '../utils/ao-string';
import { AOContainerService } from '../directives/ao-container/ao-container.service';
import { AOMenuService } from '../services/ao-menu.service';
import * as i0 from "@angular/core";
import * as i1 from "@ionic/angular";
import * as i2 from "./ao-menu.service";
import * as i3 from "../directives/ao-container/ao-container.service";
var AOService = /** @class */ (function () {
    function AOService(platform, ionLoading, ionAlert, ionModal, ionSheet, ionToast, menu, container) {
        this.platform = platform;
        this.ionLoading = ionLoading;
        this.ionAlert = ionAlert;
        this.ionModal = ionModal;
        this.ionSheet = ionSheet;
        this.ionToast = ionToast;
        this.menu = menu;
        this.container = container;
    }
    //--------------------------------------------------------------------------------------------------------------------
    // LOADING
    //--------------------------------------------------------------------------------------------------------------------
    //--------------------------------------------------------------------------------------------------------------------
    // LOADING
    //--------------------------------------------------------------------------------------------------------------------
    /**
     * @param {?} promise
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.wait = 
    //--------------------------------------------------------------------------------------------------------------------
    // LOADING
    //--------------------------------------------------------------------------------------------------------------------
    /**
     * @param {?} promise
     * @param {?=} opts
     * @return {?}
     */
    function (promise, opts) {
        if (opts === void 0) { opts = {}; }
        return this.ionLoading.create(tslib_1.__assign({ message: 'Carregando...' }, opts)).then((/**
         * @param {?} loading
         * @return {?}
         */
        function (loading) {
            return loading.present().then((/**
             * @return {?}
             */
            function () {
                promise.finally((/**
                 * @return {?}
                 */
                function () { return loading.dismiss(); }));
                return promise;
            }));
        }));
    };
    //--------------------------------------------------------------------------------------------------------------------
    // DROPDOWN
    //--------------------------------------------------------------------------------------------------------------------
    //--------------------------------------------------------------------------------------------------------------------
    // DROPDOWN
    //--------------------------------------------------------------------------------------------------------------------
    /**
     * @param {?=} buttons
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.sheet = 
    //--------------------------------------------------------------------------------------------------------------------
    // DROPDOWN
    //--------------------------------------------------------------------------------------------------------------------
    /**
     * @param {?=} buttons
     * @param {?=} opts
     * @return {?}
     */
    function (buttons, opts) {
        if (buttons === void 0) { buttons = {}; }
        if (opts === void 0) { opts = {}; }
        return this.ionSheet.create(tslib_1.__assign({ header: 'Opções...', buttons: buttons }, opts)).then((/**
         * @param {?} sheet
         * @return {?}
         */
        function (sheet) {
            return sheet.present().then((/**
             * @return {?}
             */
            function () {
                return sheet;
            }));
        }));
    };
    //--------------------------------------------------------------------------------------------------------------------
    // MODAL
    //--------------------------------------------------------------------------------------------------------------------
    //--------------------------------------------------------------------------------------------------------------------
    // MODAL
    //--------------------------------------------------------------------------------------------------------------------
    /**
     * @param {?} component
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.modal = 
    //--------------------------------------------------------------------------------------------------------------------
    // MODAL
    //--------------------------------------------------------------------------------------------------------------------
    /**
     * @param {?} component
     * @param {?=} opts
     * @return {?}
     */
    function (component, opts) {
        if (opts === void 0) { opts = {}; }
        return this.ionModal.create(tslib_1.__assign({ component: component }, opts)).then((/**
         * @param {?} modal
         * @return {?}
         */
        function (modal) {
            return modal.present().then((/**
             * @return {?}
             */
            function () {
                return modal;
            }));
        }));
    };
    //--------------------------------------------------------------------------------------------------------------------
    // ALERT
    //--------------------------------------------------------------------------------------------------------------------
    //--------------------------------------------------------------------------------------------------------------------
    // ALERT
    //--------------------------------------------------------------------------------------------------------------------
    /**
     * @param {?} message
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.alert = 
    //--------------------------------------------------------------------------------------------------------------------
    // ALERT
    //--------------------------------------------------------------------------------------------------------------------
    /**
     * @param {?} message
     * @param {?=} opts
     * @return {?}
     */
    function (message, opts) {
        if (opts === void 0) { opts = {}; }
        return this.ionAlert.create(tslib_1.__assign({ header: 'Atenção...', message: message, buttons: [
                { text: 'OK', role: 'OK' }
            ] }, opts)).then((/**
         * @param {?} alert
         * @return {?}
         */
        function (alert) {
            return alert.present().then((/**
             * @return {?}
             */
            function () {
                return alert.onDidDismiss();
            }));
        }));
    };
    //--------------------------------------------------------------------------------------------------------------------
    // PROMPT
    //--------------------------------------------------------------------------------------------------------------------
    //--------------------------------------------------------------------------------------------------------------------
    // PROMPT
    //--------------------------------------------------------------------------------------------------------------------
    /**
     * @param {?} inputs
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.prompt = 
    //--------------------------------------------------------------------------------------------------------------------
    // PROMPT
    //--------------------------------------------------------------------------------------------------------------------
    /**
     * @param {?} inputs
     * @param {?=} opts
     * @return {?}
     */
    function (inputs, opts) {
        if (opts === void 0) { opts = {}; }
        return this.alert('', tslib_1.__assign({ header: 'Preencha...', inputs: inputs, buttons: [
                { text: 'CANCELAR', role: 'CANCEL' },
                { text: 'OK', role: 'OK' }
            ] }, opts));
    };
    //--------------------------------------------------------------------------------------------------------------------
    // CONFIRM
    //--------------------------------------------------------------------------------------------------------------------
    //--------------------------------------------------------------------------------------------------------------------
    // CONFIRM
    //--------------------------------------------------------------------------------------------------------------------
    /**
     * @param {?} message
     * @param {?=} yes
     * @param {?=} no
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.confirm = 
    //--------------------------------------------------------------------------------------------------------------------
    // CONFIRM
    //--------------------------------------------------------------------------------------------------------------------
    /**
     * @param {?} message
     * @param {?=} yes
     * @param {?=} no
     * @param {?=} opts
     * @return {?}
     */
    function (message, yes, no, opts) {
        if (yes === void 0) { yes = (/**
         * @return {?}
         */
        function () { return null; }); }
        if (no === void 0) { no = (/**
         * @return {?}
         */
        function () { return null; }); }
        if (opts === void 0) { opts = {}; }
        return this.alert(message, tslib_1.__assign({ header: 'Confirmação...', buttons: [
                { text: 'NÃO', role: 'NO' },
                { text: 'SIM', role: 'YES' }
            ] }, opts)).then((/**
         * @param {?} response
         * @return {?}
         */
        function (response) {
            response.role == 'YES' ? yes() : no();
            return response;
        }));
    };
    /**
     * @param {?=} yes
     * @param {?=} no
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.confirmOperation = /**
     * @param {?=} yes
     * @param {?=} no
     * @param {?=} opts
     * @return {?}
     */
    function (yes, no, opts) {
        if (yes === void 0) { yes = (/**
         * @return {?}
         */
        function () { return null; }); }
        if (no === void 0) { no = (/**
         * @return {?}
         */
        function () { return null; }); }
        if (opts === void 0) { opts = {}; }
        return this.confirm('Deseja realmente <b>realizar</b> esta operação?', yes, no, opts);
    };
    /**
     * @param {?=} yes
     * @param {?=} no
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.confirmActivate = /**
     * @param {?=} yes
     * @param {?=} no
     * @param {?=} opts
     * @return {?}
     */
    function (yes, no, opts) {
        if (yes === void 0) { yes = (/**
         * @return {?}
         */
        function () { return null; }); }
        if (no === void 0) { no = (/**
         * @return {?}
         */
        function () { return null; }); }
        if (opts === void 0) { opts = {}; }
        return this.confirm('Deseja realmente <b>ativar</b> este item?', yes, no, opts);
    };
    /**
     * @param {?=} yes
     * @param {?=} no
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.confirmDeactivate = /**
     * @param {?=} yes
     * @param {?=} no
     * @param {?=} opts
     * @return {?}
     */
    function (yes, no, opts) {
        if (yes === void 0) { yes = (/**
         * @return {?}
         */
        function () { return null; }); }
        if (no === void 0) { no = (/**
         * @return {?}
         */
        function () { return null; }); }
        if (opts === void 0) { opts = {}; }
        return this.confirm('Deseja realmente <b>desativar</b> este item?', yes, no, opts);
    };
    /**
     * @param {?=} yes
     * @param {?=} no
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.confirmDestroy = /**
     * @param {?=} yes
     * @param {?=} no
     * @param {?=} opts
     * @return {?}
     */
    function (yes, no, opts) {
        if (yes === void 0) { yes = (/**
         * @return {?}
         */
        function () { return null; }); }
        if (no === void 0) { no = (/**
         * @return {?}
         */
        function () { return null; }); }
        if (opts === void 0) { opts = {}; }
        return this.confirm('Deseja realmente <b>excluir</b> este item?', yes, no, opts);
    };
    //--------------------------------------------------------------------------------------------------------------------
    // TOAST
    //--------------------------------------------------------------------------------------------------------------------
    //--------------------------------------------------------------------------------------------------------------------
    // TOAST
    //--------------------------------------------------------------------------------------------------------------------
    /**
     * @param {?} message
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.toast = 
    //--------------------------------------------------------------------------------------------------------------------
    // TOAST
    //--------------------------------------------------------------------------------------------------------------------
    /**
     * @param {?} message
     * @param {?=} opts
     * @return {?}
     */
    function (message, opts) {
        if (opts === void 0) { opts = {}; }
        return this.ionToast.create(tslib_1.__assign({ message: message, duration: AOString.readingTime(message) }, opts)).then((/**
         * @param {?} toast
         * @return {?}
         */
        function (toast) {
            return toast.present().then((/**
             * @return {?}
             */
            function () {
                return toast.onDidDismiss();
            }));
        }));
    };
    /**
     * @param {?} message
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.info = /**
     * @param {?} message
     * @param {?=} opts
     * @return {?}
     */
    function (message, opts) {
        if (opts === void 0) { opts = {}; }
        //console.info(message);
        return this.toast(message, tslib_1.__assign({ color: 'tertiary' }, opts));
    };
    /**
     * @param {?} message
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.success = /**
     * @param {?} message
     * @param {?=} opts
     * @return {?}
     */
    function (message, opts) {
        if (opts === void 0) { opts = {}; }
        //console.log(message);
        return this.toast(message, tslib_1.__assign({ color: 'success' }, opts));
    };
    /**
     * @param {?} message
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.warning = /**
     * @param {?} message
     * @param {?=} opts
     * @return {?}
     */
    function (message, opts) {
        if (opts === void 0) { opts = {}; }
        console.warn(message);
        return this.toast(message, tslib_1.__assign({ color: 'warning' }, opts));
    };
    /**
     * @param {?} message
     * @param {?=} opts
     * @return {?}
     */
    AOService.prototype.danger = /**
     * @param {?} message
     * @param {?=} opts
     * @return {?}
     */
    function (message, opts) {
        if (opts === void 0) { opts = {}; }
        console.error(message, opts.error);
        return this.toast(message, tslib_1.__assign({ color: 'danger' }, opts));
    };
    AOService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    /** @nocollapse */
    AOService.ctorParameters = function () { return [
        { type: Platform },
        { type: LoadingController },
        { type: AlertController },
        { type: ModalController },
        { type: ActionSheetController },
        { type: ToastController },
        { type: AOMenuService },
        { type: AOContainerService }
    ]; };
    /** @nocollapse */ AOService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function AOService_Factory() { return new AOService(i0.ɵɵinject(i1.Platform), i0.ɵɵinject(i1.LoadingController), i0.ɵɵinject(i1.AlertController), i0.ɵɵinject(i1.ModalController), i0.ɵɵinject(i1.ActionSheetController), i0.ɵɵinject(i1.ToastController), i0.ɵɵinject(i2.AOMenuService), i0.ɵɵinject(i3.AOContainerService)); }, token: AOService, providedIn: "root" });
    return AOService;
}());
export { AOService };
if (false) {
    /** @type {?} */
    AOService.prototype.platform;
    /** @type {?} */
    AOService.prototype.ionLoading;
    /** @type {?} */
    AOService.prototype.ionAlert;
    /** @type {?} */
    AOService.prototype.ionModal;
    /** @type {?} */
    AOService.prototype.ionSheet;
    /** @type {?} */
    AOService.prototype.ionToast;
    /** @type {?} */
    AOService.prototype.menu;
    /** @type {?} */
    AOService.prototype.container;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW8uc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2FvLWFuZ3VsYXIvIiwic291cmNlcyI6WyJsaWIvc2VydmljZXMvYW8uc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFDTCxxQkFBcUIsRUFDckIsZUFBZSxFQUNmLGlCQUFpQixFQUNqQixlQUFlLEVBQ2YsUUFBUSxFQUNSLGVBQWUsRUFDaEIsTUFBTSxnQkFBZ0IsQ0FBQztBQUV4QixPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFDOUMsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0saURBQWlELENBQUM7QUFDckYsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDZCQUE2QixDQUFDOzs7OztBQUU1RDtJQUtFLG1CQUNTLFFBQWtCLEVBQ2xCLFVBQTZCLEVBQzdCLFFBQXlCLEVBQ3pCLFFBQXlCLEVBQ3pCLFFBQStCLEVBQy9CLFFBQXlCLEVBQ3pCLElBQW1CLEVBQ25CLFNBQTZCO1FBUDdCLGFBQVEsR0FBUixRQUFRLENBQVU7UUFDbEIsZUFBVSxHQUFWLFVBQVUsQ0FBbUI7UUFDN0IsYUFBUSxHQUFSLFFBQVEsQ0FBaUI7UUFDekIsYUFBUSxHQUFSLFFBQVEsQ0FBaUI7UUFDekIsYUFBUSxHQUFSLFFBQVEsQ0FBdUI7UUFDL0IsYUFBUSxHQUFSLFFBQVEsQ0FBaUI7UUFDekIsU0FBSSxHQUFKLElBQUksQ0FBZTtRQUNuQixjQUFTLEdBQVQsU0FBUyxDQUFvQjtJQUV0QyxDQUFDO0lBRUQsc0hBQXNIO0lBQ3RILFVBQVU7SUFDVixzSEFBc0g7Ozs7Ozs7OztJQUV0SCx3QkFBSTs7Ozs7Ozs7O0lBQUosVUFBSyxPQUFxQixFQUFFLElBQWM7UUFBZCxxQkFBQSxFQUFBLFNBQWM7UUFDeEMsT0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sb0JBQUUsT0FB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LENBQUMsT0FBTyxxQkFBRyxLQUFLLEVBQUUsUUFBUSxJQUFLLElBQUksRUFBRSxDQUFDO0lBQ3pELENBQUM7O2dCQTFMRixVQUFVLFNBQUM7b0JBQ1YsVUFBVSxFQUFFLE1BQU07aUJBQ25COzs7O2dCQVZDLFFBQVE7Z0JBRlIsaUJBQWlCO2dCQURqQixlQUFlO2dCQUVmLGVBQWU7Z0JBSGYscUJBQXFCO2dCQUtyQixlQUFlO2dCQUtSLGFBQWE7Z0JBRGIsa0JBQWtCOzs7b0JBWDNCO0NBME1DLEFBNUxELElBNExDO1NBekxZLFNBQVM7OztJQUdsQiw2QkFBeUI7O0lBQ3pCLCtCQUFvQzs7SUFDcEMsNkJBQWdDOztJQUNoQyw2QkFBZ0M7O0lBQ2hDLDZCQUFzQzs7SUFDdEMsNkJBQWdDOztJQUNoQyx5QkFBMEI7O0lBQzFCLDhCQUFvQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtcclxuICBBY3Rpb25TaGVldENvbnRyb2xsZXIsXHJcbiAgQWxlcnRDb250cm9sbGVyLFxyXG4gIExvYWRpbmdDb250cm9sbGVyLFxyXG4gIE1vZGFsQ29udHJvbGxlcixcclxuICBQbGF0Zm9ybSxcclxuICBUb2FzdENvbnRyb2xsZXJcclxufSBmcm9tICdAaW9uaWMvYW5ndWxhcic7XHJcblxyXG5pbXBvcnQgeyBBT1N0cmluZyB9IGZyb20gJy4uL3V0aWxzL2FvLXN0cmluZyc7XHJcbmltcG9ydCB7IEFPQ29udGFpbmVyU2VydmljZSB9IGZyb20gJy4uL2RpcmVjdGl2ZXMvYW8tY29udGFpbmVyL2FvLWNvbnRhaW5lci5zZXJ2aWNlJztcclxuaW1wb3J0IHsgQU9NZW51U2VydmljZSB9IGZyb20gJy4uL3NlcnZpY2VzL2FvLW1lbnUuc2VydmljZSc7XHJcblxyXG5ASW5qZWN0YWJsZSh7XHJcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBBT1NlcnZpY2Uge1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHB1YmxpYyBwbGF0Zm9ybTogUGxhdGZvcm0sXHJcbiAgICBwdWJsaWMgaW9uTG9hZGluZzogTG9hZGluZ0NvbnRyb2xsZXIsXHJcbiAgICBwdWJsaWMgaW9uQWxlcnQ6IEFsZXJ0Q29udHJvbGxlcixcclxuICAgIHB1YmxpYyBpb25Nb2RhbDogTW9kYWxDb250cm9sbGVyLFxyXG4gICAgcHVibGljIGlvblNoZWV0OiBBY3Rpb25TaGVldENvbnRyb2xsZXIsXHJcbiAgICBwdWJsaWMgaW9uVG9hc3Q6IFRvYXN0Q29udHJvbGxlcixcclxuICAgIHB1YmxpYyBtZW51OiBBT01lbnVTZXJ2aWNlLFxyXG4gICAgcHVibGljIGNvbnRhaW5lcjogQU9Db250YWluZXJTZXJ2aWNlLFxyXG4gICkge1xyXG4gIH1cclxuXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vIExPQURJTkdcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIHdhaXQocHJvbWlzZTogUHJvbWlzZTxhbnk+LCBvcHRzOiBhbnkgPSB7fSkge1xyXG4gICAgcmV0dXJuIHRoaXMuaW9uTG9hZGluZy5jcmVhdGUoe21lc3NhZ2U6ICdDYXJyZWdhbmRvLi4uJywgLi4ub3B0c30pLnRoZW4obG9hZGluZyA9PiB7XHJcblxyXG4gICAgICByZXR1cm4gbG9hZGluZy5wcmVzZW50KCkudGhlbigoKSA9PiB7XHJcblxyXG4gICAgICAgIHByb21pc2UuZmluYWxseSgoKSA9PiBsb2FkaW5nLmRpc21pc3MoKSk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBEUk9QRE9XTlxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgc2hlZXQoYnV0dG9uczogYW55ID0ge30sIG9wdHM6IGFueSA9IHt9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5pb25TaGVldC5jcmVhdGUoe2hlYWRlcjogJ09ww6fDtWVzLi4uJywgYnV0dG9ucywgLi4ub3B0c30pLnRoZW4oc2hlZXQgPT4ge1xyXG5cclxuICAgICAgcmV0dXJuIHNoZWV0LnByZXNlbnQoKS50aGVuKCgpID0+IHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHNoZWV0O1xyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gTU9EQUxcclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4gIG1vZGFsKGNvbXBvbmVudCwgb3B0czogYW55ID0ge30pIHtcclxuICAgIHJldHVybiB0aGlzLmlvbk1vZGFsLmNyZWF0ZSh7Y29tcG9uZW50LCAuLi5vcHRzfSkudGhlbihtb2RhbCA9PiB7XHJcblxyXG4gICAgICByZXR1cm4gbW9kYWwucHJlc2VudCgpLnRoZW4oKCkgPT4ge1xyXG5cclxuICAgICAgICByZXR1cm4gbW9kYWw7XHJcblxyXG4gICAgICB9KTtcclxuXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICAvLyBBTEVSVFxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgYWxlcnQobWVzc2FnZTogc3RyaW5nLCBvcHRzOiBhbnkgPSB7fSkge1xyXG4gICAgcmV0dXJuIHRoaXMuaW9uQWxlcnQuY3JlYXRlKFxyXG4gICAgICB7XHJcbiAgICAgICAgaGVhZGVyOiAnQXRlbsOnw6NvLi4uJyxcclxuICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgIGJ1dHRvbnM6IFtcclxuICAgICAgICAgIHt0ZXh0OiAnT0snLCByb2xlOiAnT0snfVxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgLi4ub3B0c1xyXG4gICAgICB9XHJcbiAgICApLnRoZW4oYWxlcnQgPT4ge1xyXG5cclxuICAgICAgcmV0dXJuIGFsZXJ0LnByZXNlbnQoKS50aGVuKCgpID0+IHtcclxuXHJcbiAgICAgICAgcmV0dXJuIGFsZXJ0Lm9uRGlkRGlzbWlzcygpO1xyXG5cclxuICAgICAgfSk7XHJcblxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gUFJPTVBUXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICBwcm9tcHQoaW5wdXRzOiBhbnlbXSwgb3B0czogYW55ID0ge30pIHtcclxuICAgIHJldHVybiB0aGlzLmFsZXJ0KCcnLCB7XHJcbiAgICAgIGhlYWRlcjogJ1ByZWVuY2hhLi4uJyxcclxuXHJcbiAgICAgIGlucHV0cyxcclxuXHJcbiAgICAgIGJ1dHRvbnM6IFtcclxuICAgICAgICB7dGV4dDogJ0NBTkNFTEFSJywgcm9sZTogJ0NBTkNFTCd9LFxyXG4gICAgICAgIHt0ZXh0OiAnT0snLCByb2xlOiAnT0snfVxyXG4gICAgICBdLFxyXG5cclxuICAgICAgLi4ub3B0c1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAgLy8gQ09ORklSTVxyXG4gIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuXHJcbiAgY29uZmlybShtZXNzYWdlOiBzdHJpbmcsIHllcyA9ICgpID0+IG51bGwsIG5vID0gKCkgPT4gbnVsbCwgb3B0czogYW55ID0ge30pIHtcclxuICAgIHJldHVybiB0aGlzLmFsZXJ0KG1lc3NhZ2UsIHtcclxuXHJcbiAgICAgIGhlYWRlcjogJ0NvbmZpcm1hw6fDo28uLi4nLFxyXG5cclxuICAgICAgYnV0dG9uczogW1xyXG4gICAgICAgIHt0ZXh0OiAnTsODTycsIHJvbGU6ICdOTyd9LFxyXG4gICAgICAgIHt0ZXh0OiAnU0lNJywgcm9sZTogJ1lFUyd9XHJcbiAgICAgIF0sXHJcblxyXG4gICAgICAuLi5vcHRzXHJcblxyXG4gICAgfSkudGhlbihyZXNwb25zZSA9PiB7XHJcblxyXG4gICAgICByZXNwb25zZS5yb2xlID09ICdZRVMnID8geWVzKCkgOiBubygpO1xyXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XHJcblxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjb25maXJtT3BlcmF0aW9uKHllcyA9ICgpID0+IG51bGwsIG5vID0gKCkgPT4gbnVsbCwgb3B0czogYW55ID0ge30pIHtcclxuICAgIHJldHVybiB0aGlzLmNvbmZpcm0oJ0Rlc2VqYSByZWFsbWVudGUgPGI+cmVhbGl6YXI8L2I+IGVzdGEgb3BlcmHDp8Ojbz8nLCB5ZXMsIG5vLCBvcHRzKTtcclxuICB9XHJcblxyXG4gIGNvbmZpcm1BY3RpdmF0ZSh5ZXMgPSAoKSA9PiBudWxsLCBubyA9ICgpID0+IG51bGwsIG9wdHM6IGFueSA9IHt9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb25maXJtKCdEZXNlamEgcmVhbG1lbnRlIDxiPmF0aXZhcjwvYj4gZXN0ZSBpdGVtPycsIHllcywgbm8sIG9wdHMpO1xyXG4gIH1cclxuXHJcbiAgY29uZmlybURlYWN0aXZhdGUoeWVzID0gKCkgPT4gbnVsbCwgbm8gPSAoKSA9PiBudWxsLCBvcHRzOiBhbnkgPSB7fSkge1xyXG4gICAgcmV0dXJuIHRoaXMuY29uZmlybSgnRGVzZWphIHJlYWxtZW50ZSA8Yj5kZXNhdGl2YXI8L2I+IGVzdGUgaXRlbT8nLCB5ZXMsIG5vLCBvcHRzKTtcclxuICB9XHJcblxyXG4gIGNvbmZpcm1EZXN0cm95KHllcyA9ICgpID0+IG51bGwsIG5vID0gKCkgPT4gbnVsbCwgb3B0czogYW55ID0ge30pIHtcclxuICAgIHJldHVybiB0aGlzLmNvbmZpcm0oJ0Rlc2VqYSByZWFsbWVudGUgPGI+ZXhjbHVpcjwvYj4gZXN0ZSBpdGVtPycsIHllcywgbm8sIG9wdHMpO1xyXG4gIH1cclxuXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4gIC8vIFRPQVNUXHJcbiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICB0b2FzdChtZXNzYWdlOiBzdHJpbmcsIG9wdHM6IGFueSA9IHt9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5pb25Ub2FzdC5jcmVhdGUoe1xyXG4gICAgICBtZXNzYWdlLFxyXG4gICAgICBkdXJhdGlvbjogQU9TdHJpbmcucmVhZGluZ1RpbWUobWVzc2FnZSksXHJcbiAgICAgIC4uLm9wdHNcclxuICAgIH0pLnRoZW4odG9hc3QgPT4ge1xyXG4gICAgICByZXR1cm4gdG9hc3QucHJlc2VudCgpLnRoZW4oKCkgPT4ge1xyXG5cclxuICAgICAgICByZXR1cm4gdG9hc3Qub25EaWREaXNtaXNzKCk7XHJcblxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaW5mbyhtZXNzYWdlOiBzdHJpbmcsIG9wdHM6IGFueSA9IHt9KSB7XHJcbiAgICAvL2NvbnNvbGUuaW5mbyhtZXNzYWdlKTtcclxuICAgIHJldHVybiB0aGlzLnRvYXN0KG1lc3NhZ2UsIHtjb2xvcjogJ3RlcnRpYXJ5JywgLi4ub3B0c30pO1xyXG4gIH1cclxuXHJcbiAgc3VjY2VzcyhtZXNzYWdlOiBzdHJpbmcsIG9wdHM6IGFueSA9IHt9KSB7XHJcbiAgICAvL2NvbnNvbGUubG9nKG1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIHRoaXMudG9hc3QobWVzc2FnZSwge2NvbG9yOiAnc3VjY2VzcycsIC4uLm9wdHN9KTtcclxuICB9XHJcblxyXG4gIHdhcm5pbmcobWVzc2FnZTogc3RyaW5nLCBvcHRzOiBhbnkgPSB7fSkge1xyXG4gICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xyXG4gICAgcmV0dXJuIHRoaXMudG9hc3QobWVzc2FnZSwge2NvbG9yOiAnd2FybmluZycsIC4uLm9wdHN9KTtcclxuICB9XHJcblxyXG4gIGRhbmdlcihtZXNzYWdlOiBzdHJpbmcsIG9wdHM6IGFueSA9IHt9KSB7XHJcbiAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UsIG9wdHMuZXJyb3IpO1xyXG4gICAgcmV0dXJuIHRoaXMudG9hc3QobWVzc2FnZSwge2NvbG9yOiAnZGFuZ2VyJywgLi4ub3B0c30pO1xyXG4gIH1cclxuXHJcbn1cclxuIl19